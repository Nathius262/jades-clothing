<section class="container my-5">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item"><a href="/product">Product</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{product.name}}</li>
    </ol>
  </nav>

  <div class="row g-5">
    <!-- Product Image -->
    <div class="col-md-6">
      
      <div class="row">
        <div class="col-12 mt-1 mb-4">
        <!-- Check if any image is marked as primary -->
        {{#each product.images}}
        {{#if this.is_primary}}
        <img src="{{this.url}}" 
            class="img-fluid rounded shadow" 
            alt="{{product.name}}">

        {{/if}}
        {{/each}}

        <!-- If no primary image, use the first image as default -->
        {{#unless (anyImageIsPrimary product.images)}}
        {{#each product.images}}
        {{#if @first}}
        <img src="{{this.url}}" 
            class="img-fluid rounded shadow" 
            alt="{{product.name}}">
        {{/if}}
        {{/each}}
        {{/unless}}
      </div>

      <div class="col-12">
        <div class="row ">
            <!-- Loop through images for hover, displaying those that are not primary -->
            {{#each product.images}}
            {{#unless product.is_primary}}
            <div class="col-4">
              <img src="{{this.url}}" alt="{{this.short_description}} Alt"
                class="img-fluid w-100 mb-3" style="object-fit: cover; object-position: center;">
            </div>
            {{/unless}}
            {{/each}}


        </div>
      </div>
      </div>
    </div>

    <!-- Product Info -->
    <div class="col-md-6">
      <h2 class="mb-3" style="font-family: 'Playfair Display', serif;">{{product.name}}</h2>
      <p class="text-success fs-4 fw-bold">₦{{product.price}}</p>

      <!-- Ratings -->
      <div class="mb-3">
        <i class="bi bi-star-fill text-gold"></i>
        <i class="bi bi-star-fill text-gold"></i>
        <i class="bi bi-star-fill text-gold"></i>
        <i class="bi bi-star-fill text-gold"></i>
        <i class="bi bi-star text-gold"></i>
        <span class="ms-2 text-muted">(42 reviews)</span>
      </div>

      <p class="mt-3 ">{{product.short_description}}</p>

      <div class="mt-4">
        <span class="fw-bold">Available Stock:</span> {{product.stock}}
      </div>


      <!-- Quantity Controls -->
      <div class="d-grid my-4">
        <span class="fw-bold">Quantity:</span>
        <div class="quantity-controls" data-product-id="{{product.id}}">        
          <button class="btn btn-sm btn-secondary decrement-btn">-</button>
          <input type="number" class="quantity-input form-control d-inline w-25" value="1" min="1">
          <button class="btn btn-sm btn-secondary increment-btn">+</button>
        </div>

      </div>
      <!-- Add to Cart -->
      <button class="btn btn-success btn-lg add-to-cart" data-product-price="{{product.price}}" data-product-id="{{product.id}}">
        <i class="bi bi-cart-plus"></i> Add to Cart
      </button>
    </div>
  </div>

  <!-- Tabs Section -->
  <div class="row mt-5">
    <div class="col-md-12">
      <ul class="nav nav-tabs" id="productTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="desc-tab" data-bs-toggle="tab" data-bs-target="#desc" type="button">Description</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button">Reviews</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="shipping-tab" data-bs-toggle="tab" data-bs-target="#shipping" type="button">Shipping Info</button>
        </li>
      </ul>
      <div class="tab-content border border-top-0 p-4" id="productTabContent">
        <div class="tab-pane fade show active" id="desc" role="tabpanel">
          {{product.description}}
        </div>
        <div class="tab-pane fade" id="reviews" role="tabpanel">
          <p><strong>Olamide:</strong> “Beautifully made! Got lots of compliments at my event.” ⭐⭐⭐⭐⭐</p>
          <p><strong>Amaka:</strong> “Stitching is top-notch. Will buy again!” ⭐⭐⭐⭐</p>
        </div>
        <div class="tab-pane fade" id="shipping" role="tabpanel">
          <p>Ships within 2–4 business days. Free delivery for orders above ₦30,000 in Nigeria.</p>
        </div>
      </div>
    </div>
  </div>
</section>
