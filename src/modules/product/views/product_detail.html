<style>
  .cursor-pointer {
    cursor: pointer;
  }

  .thumbnail-image {
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }

  .thumbnail-image:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .active-thumbnail {
    border: 2px solid #28a745 !important;
    /* Bootstrap success color */
    box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
  }
</style>

<section class="container my-5">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item"><a href="/product">Product</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{product.name}}</li>
    </ol>
  </nav>

  <div class="row g-5">
    <!-- Product Image Gallery -->
    <div class="col-md-6">
      <div class="row">
        <!-- Main Image Display -->
        <div class="col-12 mt-1 mb-4">
          <!-- Primary image or first image as default (initially shown) -->
          {{#each product.images}}
          {{#if this.is_primary}}
          <img id="main-product-image" src="{{this.url}}" class="img-fluid rounded shadow" alt="{{product.name}}"
            data-image-id="{{this.id}}">
          {{/if}}
          {{/each}}

          {{#unless (anyImageIsPrimary product.images)}}
          {{#each product.images}}
          {{#if @first}}
          <img id="main-product-image" src="{{this.url}}" class="img-fluid rounded shadow" alt="{{product.name}}"
            data-image-id="{{this.id}}">
          {{/if}}
          {{/each}}
          {{/unless}}
        </div>

        <!-- Thumbnail Gallery -->
        <div class="col-12">
          <div class="row">
            {{#each product.images}}
            <div class="col-4 mb-3">
              <img src="{{this.url}}" alt="{{product.name}} - Image {{@index}}"
                class="img-fluid container thumbnail-image cursor-pointer {{#if this.is_primary}}active-thumbnail{{/if}}"
                style="object-fit: cover; height: 200px; width: 100%;" data-full-image="{{this.url}}" data-image-id="{{this.id}}">
            </div>
            {{/each}}
          </div>
        </div>
      </div>
    </div>


    <!-- Product Info -->
    <div class="col-md-6">
      <h2 class="mb-3" style="font-family: 'Playfair Display', serif;">{{product.name}}</h2>
      <p class="text-success fs-4 fw-bold">₦{{product.price}}</p>

      <!-- Ratings -->
      <div class="mb-3">
        <i class="bi bi-star-fill text-gold"></i>
        <i class="bi bi-star-fill text-gold"></i>
        <i class="bi bi-star-fill text-gold"></i>
        <i class="bi bi-star-fill text-gold"></i>
        <i class="bi bi-star text-gold"></i>
        <span class="ms-2 text-muted">(42 reviews)</span>
      </div>

      <p class="mt-3 ">{{product.short_description}}</p>

      <div class="mt-4">
        <span class="fw-bold">Available Stock:</span> {{product.stock}}
      </div>


      <!-- Quantity Controls -->
      <div class="d-grid my-4">
        <span class="fw-bold">Quantity:</span>
        <div class="quantity-controls" data-product-id="{{product.id}}">
          <button class="btn btn-sm btn-secondary decrement-btn">-</button>
          <input type="number" class="quantity-input form-control d-inline w-25" value="1" min="1">
          <button class="btn btn-sm btn-secondary increment-btn">+</button>
        </div>

      </div>
      <!-- Add to Cart -->
      <button class="btn btn-success btn-lg add-to-cart" data-product-price="{{product.price}}"
        data-product-id="{{product.id}}">
        <i class="bi bi-cart-plus"></i> Add to Cart
      </button>
    </div>
  </div>

  <!-- Tabs Section -->
  <div class="row mt-5">
    <div class="col-md-12">
      <ul class="nav nav-tabs" id="productTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="desc-tab" data-bs-toggle="tab" data-bs-target="#desc"
            type="button">Description</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews"
            type="button">Reviews</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="shipping-tab" data-bs-toggle="tab" data-bs-target="#shipping"
            type="button">Shipping Info</button>
        </li>
      </ul>
      <div class="tab-content border border-top-0 p-4" id="productTabContent">
        <div class="tab-pane fade show active" id="desc" role="tabpanel">
          {{product.description}}
        </div>
        <div class="tab-pane fade" id="reviews" role="tabpanel">
          <p><strong>Olamide:</strong> “Beautifully made! Got lots of compliments at my event.” ⭐⭐⭐⭐⭐</p>
          <p><strong>Amaka:</strong> “Stitching is top-notch. Will buy again!” ⭐⭐⭐⭐</p>
        </div>
        <div class="tab-pane fade" id="shipping" role="tabpanel">
          <p>Ships within 2–4 business days. Free delivery for orders above ₦30,000 in Nigeria.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!--SCRIPT-->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const mainImage = document.getElementById('main-product-image');
    const thumbnails = document.querySelectorAll('.thumbnail-image');

    thumbnails.forEach(thumbnail => {
      thumbnail.addEventListener('click', function () {
        // Update main image source
        mainImage.src = this.dataset.fullImage;
        mainImage.dataset.imageId = this.dataset.imageId;

        // Update active thumbnail styling
        thumbnails.forEach(t => t.classList.remove('active-thumbnail'));
        this.classList.add('active-thumbnail');
      });
    });
  });
</script>