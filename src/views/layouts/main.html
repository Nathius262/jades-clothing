<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="description"
        content="Jade's Clothing is a full-stack e-commerce platform built to showcase and sell beautiful Nigerian traditional and contemporary attire. It's structured for growth and modular development.">
    <meta name="keywords" content="nexus, nexusjs, framework">
    <meta name="author" content="nathius262">
    <meta property="og:title" content="NexusJs | {{pageTitle}}">
    <meta property="og:description"
        content="Jade's Clothing is a full-stack e-commerce platform built to showcase and sell beautiful Nigerian traditional and contemporary attire. It's structured for growth and modular development.">
    <meta property="og:image" content={{pageLogo}}>
    <meta property="og:url" content="https://github.com/Nathius262/nexusjs">

    <!--twitter social share-->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{pageTitle}}" id="twitterTitle">
    <meta name="twitter:description"
        content="Jade's Clothing is a full-stack e-commerce platform built to showcase and sell beautiful Nigerian traditional and contemporary attire. It's structured for growth and modular development."
        id="twitterDescription">
    <meta name="twitter:image" content={{pageLogo}} id="twitterImage">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Jade's Clothing | {{pageTitle}}</title>

    <link rel="icon" href="/assets/img/logo.png">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link
        href="https://fonts.googleapis.com/css2?family=Alex+Brush&family=Poppins:wght@400;600&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css"
        integrity="sha512-siarrzI1u3pCqFG2LEzi87McrBmq6Tp7juVsdmGY1Dr8Saw+ZBAzDzrGwX3vgxX1NkioYNCFOVC0GpDPss10zQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/solid.min.css"
        integrity="sha512-Hp+WwK4QdKZk9/W0ViDvLunYjFrGJmNDt6sCflZNkjgvNq9mY+0tMbd6tWMiAlcf1OQyqL4gn2rYp7UsfssZPA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css"
        integrity="sha512-W/zrbCncQnky/EzL+/AYwTtosvrM+YG/V6piQLSe2HuKS6cmbw89kjYkp3tWFn1dkWV7L1ruvJyKbLz73Vlgfg=="
        crossorigin="anonymous" referrerpolicy="no-referrer">

    <link rel="stylesheet" href="/assets/css/font.css">
    <link href="/assets/css/main.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        /* Preloader Styles with Transitions */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }

        #preloader.fade-out {
            opacity: 0;
        }

        .preloader-container {
            position: relative;
            width: 200px;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.5s ease-out;
        }

        #preloader.fade-out .preloader-container {
            transform: scale(0.9);
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            animation: blink 1.5s infinite;
            z-index: 2;
            transition: opacity 0.3s ease;
        }

        .logo span:first-child {
            color: #000;
            display: block;
            font-size: 28px;
            font-family: 'Alex Brush', cursive;
        }

        .logo span:last-child {
            color: #000;
            display: block;
            letter-spacing: 5px;
        }

        .spinner {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 4px solid transparent;
            border-radius: 50%;
            border-top-color: black;
            animation: spin 1.5s linear infinite;
            transition: opacity 0.3s ease;
            /* Shadow effects */
            box-shadow:
                0 0 10px rgba(0, 0, 0, 0.1),
                /* subtle base shadow */
                0 0 15px rgba(0, 0, 0, 0.1) inset,
                /* inner glow */
                0 0 20px rgba(0, 0, 0, 0.2)
                /* outer glow */
            ;
            filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.3));
            /* enhanced depth */
        }

        /* For the pseudo-elements */
        .spinner::before,
        .spinner::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            border: 4px solid transparent;
            box-shadow:
                0 0 8px rgba(0, 0, 0, 0.1),
                0 0 10px rgba(0, 0, 0, 0.1) inset;
            filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.2));
        }

        .spinner::before {
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border-top-color: black;
            animation: spin 2s linear infinite reverse;
        }

        .spinner::after {
            top: 25px;
            left: 25px;
            right: 25px;
            bottom: 25px;
            border-top-color: black;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
                /* shadow intensifies during rotation */
            }

            50% {
                box-shadow: 0 0 25px rgba(0, 0, 0, 0.3);
                /* peak shadow at midpoint */
            }

            100% {
                transform: rotate(360deg);
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            }
        }

        #preloader.fade-out .spinner,
        #preloader.fade-out .logo {
            animation: none;
            opacity: 0;
        }


        /* Root Content Styles with Transition */
        #root {
            opacity: 0;
            display: block;
            transition: opacity 0.5s ease-in;
            transition-delay: 0.3s;
            /* Starts fading in after preloader starts fading out */
        }

        #root.content-visible {
            opacity: 1;
        }
    </style>
</head>

<body>
    <!-- Preloader -->
    <div id="preloader" style="transition: opacity .8s linear;">
        <div class="preloader-container">
            <div class="spinner"></div>
            <div class="logo">
                <img width="100" src="/assets/img/logo.png" alt="">
            </div>
        </div>
    </div>

    <!--============ROOT SECTION==============-->
    <section id="root" class="position-relative overflow-x-hidden" style="transition: all .4s linear;">
        <!--=========HEADER BEGIN===========-->
        {{#unless isAdmin}}
        {{> header}}
        {{/unless}}
        <!--=========HEADER END===========-->

        <!--=========MAIN BEGIN===========-->
        {{{body}}}
        <!--=========MAIN END===========-->

        <!--=========FOOTER BEGIN===========-->
        {{> notification/success}}
        {{#unless isAdmin}}
        {{> footer}}
        {{/unless}}
        <!--=========FOOTER END===========-->
    </section>
    <!--============ROOT SECTION END==============-->

    <script type="module" src="/assets/js/cart.js"></script>
    <script type="module" src="/assets/js/app.js"></script>

    <script>
        // Global script
        let title, message, redirectTo, classType, btnType;

        function messageAlert(title, message, redirectTo, classType, btnType) {
            let heading = document.querySelector('#successModalLabel')
            heading.innerHTML = title
            heading.classList.add(classType)
            document.querySelector('#modal-message').innerHTML = message;
            document.querySelector('#close-modal').classList.add(btnType);

            $("#successModal").modal('show');
            $('#successModal').on('hide.bs.modal', function (e) {
                if (redirectTo) {
                    window.location.href = redirectTo;
                } else {
                    window.location.reload();
                }
            });
        }

        const handleLogout = async () => {
            try {
                await fetch('/auth/logout', {
                    method: 'POST',
                    credentials: 'include',
                });
                window.location.href = "/admin/login";
            } catch (err) {
                console.error('Error logging out:', err);
            }
        };

        try {
            document.getElementById('logout-button').addEventListener('click', handleLogout);
        } catch { }

        // Enhanced loading sequence with transitions
        window.addEventListener('load', function () {
            setTimeout(function () {
                // Start preloader fade-out
                const preloader = document.getElementById('preloader');
                preloader.classList.add('fade-out');

                // Start content fade-in after a short delay
                setTimeout(function () {
                    const root = document.getElementById('root');
                    root.classList.add('content-visible');

                    // Remove preloader from DOM after transition completes
                    preloader.addEventListener('transitionend', function () {
                        preloader.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    });
                }, 300); // Short delay before content appears
            }, 2000); // Total preloader display time (adjust as needed)
        });

        // Fallback in case load event doesn't fire
        setTimeout(function () {
            if (document.getElementById('preloader').style.display !== 'none') {
                document.getElementById('preloader').classList.add('fade-out');
                document.getElementById('root').classList.add('content-visible');

                document.getElementById('preloader').addEventListener('transitionend', function () {
                    this.style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            }
        }, 5000); // Maximum wait time (5 seconds)
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
        integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>